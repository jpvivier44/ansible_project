---
- name: "Play 1 -demo utilisation playbook"
# taget/Pattern à qui s'adresse le PLAY

  hosts: all
  become: true

# Déclaration du block task appel des modules ansible
  tasks:
  - name: "Ajout de l'utilisateur de déploiement via ansible"
    ansible.builtin.user:
      name: deploy
      state: present
      shell: /bin/bash

  - name: "depose de la cle publique du ansible mgmt chez le user deploy"
    ansible.posix.authorized_key:
      user: deploy
      state: present  
      key: "{{ lookup('file', '/home/ansible/.ssh/id_rsa.pub') }}"

